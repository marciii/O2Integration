<topology id="myTopology">
    <var id="numFLPs" value="5" />
    <var id="numEPNs" value="1" />


    <!-- one property per communication channel name -->
    <property id="scheduledatatoflp" />
	<property id="answerfromflp" /> <!-- auch noch fÃ¼r epn? -->
    <property id="scheduledatafromepn" />

    <declrequirement id="FlpWorker" type="wnname" value="flp" />
    <declrequirement id="EpnWorker" type="wnname" value="epn" />
	<declrequirement id="SchedulerWorker" type="wnname" value="scheduler" />

<!-- worker nodes -->
    <decltask id="Scheduler">
        <exe reachable="true">/home/fiebig/FairRoot/build2/bin/examples/MQ/prototype-pubsub/schedulerprocessorpubsub --id schedulerprocessorpubsub --amountFlp=${numFLPs} --msgFreq 1000 --messageSize 1000000 --randomReply false --msgAutoscale false --channel-config name=scheduledatatoflp,type=pub,method=bind,address=ipc:///tmp/scheduler-pubsub1 name=scheduledatafromepn,type=pub,method=bind,address=ipc:///tmp/scheduler-pubsub2 name=answerfromflp,type=pair,method=bind,numSockets=${numFLPs} --network-interface enp11s0 -S "&lt;/home/fiebig/FairRoot/build2/lib" -P dds</exe>
        <requirements>
            <id>SchedulerWorker</id>
        </requirements>        
		<properties>
            <id access="write">scheduledatatoflp</id>
			<id access="write">answerfromflp</id>
			<id access="write">scheduledatafromepn</id>
        </properties>
    </decltask>

	<decltask id="Flp">
        <exe reachable="true">/home/fiebig/FairRoot/build2/bin/examples/MQ/prototype-pubsub/flpprocessorpubsub --myId %taskIndex% --id flpprocessorpubsub_%taskIndex% --network-interface enp11s0 --channel-config name=scheduledatatoflp,type=sub,method=connect,address=ipc:///tmp/scheduler-pubsub1 name=answerfromflp,type=pair,method=connect,numSockets=1 -S "&lt;/home/fiebig/FairRoot/build2/lib" -P dds --dds-i answerfromflp:%taskIndex%</exe>
        <requirements>
            <id>FlpWorker</id>
        </requirements>    
		<properties>
            <id access="write">scheduledatatoflp</id>
			<id access="read">answerfromflp</id>
        </properties>
    </decltask>
	
	<decltask id="Epn">
        <exe reachable="true">/home/fiebig/FairRoot/build2/bin/examples/MQ/prototype-pubsub/epnprocessorpubsub --id epnprocessorpubsub_%taskIndex% --network-interface enp11s0 --channel-config name=scheduledatafromepn,type=pair,method=bind,address=ipc:///tmp/scheduler-pubsub2 -S "&lt;/home/fiebig/FairRoot/build2/lib" -P dds</exe>
	   <requirements>
            <id>EpnWorker</id>
        </requirements>          
	   <properties>
            <id access="write">scheduledatafromepn</id>
        </properties>
    </decltask>
  


    <main id="main">
        <task>Scheduler</task>
        <group id="FlpGroup" n="${numFLPs}">
            <task>Flp</task>
        </group>
        <group id="EpnGroup" n="${numEPNs}">
            <task>Epn</task>
        </group>
    </main>
	
</topology>
